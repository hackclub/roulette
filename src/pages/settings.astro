---
import InsideLayout from '../layouts/InsideLayout.astro';
import LinkButton from '../components/LinkButton.astro';


import { requireUser, redirectToLogin } from '../lib/auth.js';

let userData;

export const prerender = false;

try {
  userData = await requireUser(Astro.request.headers);

} catch {
  return redirectToLogin();
}

var user = userData.fields;


---

<InsideLayout currentPage="settings">


<main>
  <div class="settings-container">
    <h1>settings</h1>
    
    <div class="settings-actions">
      <LinkButton href="/settings/details">submission details</LinkButton>
      <LinkButton href="/api/auth/logout">log out</LinkButton>
    </div>
  </div>
</main>

</InsideLayout>


<style>
main {
  padding: 40px;
  max-width: 800px;
  margin: 0 auto;
}

.settings-container {
  width: 100%;
}

h1 {
  color: var(--pink);
  margin-bottom: 32px;
  text-align: center;
}

h2 {
  color: var(--pink);
  margin-bottom: 16px;
  font-size: 1.3em;
}

  .settings-actions {
    display: flex;
    flex-direction: column;
    gap: 16px;
    align-items: center;
    margin-top: 32px;
  }

  @media (max-width: 768px) {
    main {
      padding: 20px;
    }
  }
</style>
